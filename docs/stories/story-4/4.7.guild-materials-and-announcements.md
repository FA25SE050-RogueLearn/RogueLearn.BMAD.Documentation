# Story 4.7: Guild Materials Uploads & Announcements (Basic)

## Status

Draft

## Ownership

* **Primary Owner (Social Service):** Minh Anh / An
* **Primary Owner (Frontend):** Duong

## Target Deadline

Thursday, 30/10/2025

## Story

**As a** Guild Master,
**I want** to upload study materials and post announcements,
**so that** guild members can access curated resources and stay informed.

## Acceptance Criteria

1. Data model in Social Service:
   - `GuildMaterial` (id, guildId, title, type: link|file|note, url/content, createdBy, createdAt, updatedAt, visibility: guild-only).
   - `GuildAnnouncement` (id, guildId, title, body, createdBy, createdAt, pinned: boolean).
2. APIs:
   - `GET /api/guilds/{guildId}/materials` — List materials (members only).
   - `POST /api/guilds/{guildId}/materials` — Create item; GuildMaster and Officer can create.
   - `PUT /api/guilds/{guildId}/materials/{materialId}` — Update; creator or GuildMaster.
   - `DELETE /api/guilds/{guildId}/materials/{materialId}` — Delete; GuildMaster or creator.
   - `GET /api/guilds/{guildId}/announcements` — List announcements (members).
   - `POST /api/guilds/{guildId}/announcements` — Create; GuildMaster and Officer.
   - `PUT /api/guilds/{guildId}/announcements/{announcementId}` — Update; creator or GuildMaster.
   - `DELETE /api/guilds/{guildId}/announcements/{announcementId}` — Delete; GuildMaster.
3. Frontend:
   - `/social/guild/{guildId}/materials` and `/social/guild/{guildId}/announcements` pages.
   - Components: MaterialList, MaterialEditor, AnnouncementList, AnnouncementComposer, PinToggle.
4. Rules:
   - Only guild members can view; non-members receive 403.
   - Pinned announcements shown at top.
5. OpenAPI docs updated; integration tests for CRUD and role enforcement.

## Tasks / Subtasks

- [ ] Task 1: Data Model & Migrations (AC: #1)
  - [ ] Create `GuildMaterial` and `GuildAnnouncement` tables with indexes.
- [ ] Task 2: Services & Controllers (AC: #2, #4)
  - [ ] Implement endpoints with role checks and ownership rules.
- [ ] Task 3: Frontend Pages & Components (AC: #3)
  - [ ] Build materials and announcements pages with mock data, then wire to API.
- [ ] Task 4: OpenAPI & Tests (AC: #5)
  - [ ] Document endpoints; integration tests for role enforcement and CRUD.