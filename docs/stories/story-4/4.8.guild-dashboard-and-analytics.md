# Story 4.8: Guild Dashboard & Aggregated Progress Analytics

## Status

Draft

## Ownership

* **Primary Owner (Social Service / Analytics):** Minh Anh / An
* **Primary Owner (Frontend):** Duong

## Target Deadline

Thursday, 30/10/2025

## Story

**As a** Guild Master,
**I want** a dashboard showing aggregated, anonymized course/quest progress for my guild,
**so that** I can gauge member engagement and overall progress without exposing private data.

## Acceptance Criteria

1. Data aggregation:
   - Aggregate per quest category: count completed, average score, median time.
   - Weekly activity: number of active members, quests completed.
   - Leaderboard summary: top contributors (anonymized by display name or alias).
   - Privacy: no raw personal data; only metrics and anonymized identifiers.
2. APIs:
   - `GET /api/guilds/{guildId}/analytics/overview` — Returns aggregated metrics payload.
   - `GET /api/guilds/{guildId}/analytics/weekly` — Returns weekly activity trend data.
3. Frontend:
   - `/social/guild/{guildId}/dashboard` page with cards/charts (Overview, Weekly Activity, Top Contributors).
   - Components: MetricsCards, WeeklyTrendChart, TopContributorsList.
4. Security & Roles:
   - Only GuildMaster and Officer can access analytics endpoints and dashboard.
5. Documentation & tests:
   - OpenAPI docs for analytics endpoints; integration tests for aggregation logic and role gating.

## Tasks / Subtasks

- [ ] Task 1: Aggregation Logic (AC: #1)
  - [ ] Implement query pipelines to compute metrics from submissions/quests tables.
- [ ] Task 2: Analytics API (AC: #2, #4)
  - [ ] Build endpoints with role checks and parameter validation.
- [ ] Task 3: Frontend Dashboard (AC: #3)
  - [ ] Create dashboard page and components; start with mock data then integrate live API.
- [ ] Task 4: Docs & Tests (AC: #5)
  - [ ] OpenAPI docs for payloads; integration tests verifying accuracy and access control.