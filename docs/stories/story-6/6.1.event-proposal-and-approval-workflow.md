# Story 6.1: Code Battle â€” Event Proposal and Approval Workflow

## Status

Draft

## Story

As a Guild Master, I want to propose a competitive Code Battle event and have Admins approve it, so that the event can be scheduled, published, and opened for registration.

Reference: docs/stories/FA25_CP_grp4_RogueLearn_Review2-solution.md (Flow 3: Approval and Scheduling Flow)

## Acceptance Criteria

1. Guild Master can submit event proposals with required configuration fields (title, date/time, rules, rooms/capacity, eligible guilds, min/max participants, scoring/difficulty, fees, prize).
2. Admin can review proposals and approve/decline with optional comments.
3. On approval, system publishes event info pages and opens registration.
4. Notifications are sent to Guild Master and eligible guilds upon status changes.
5. Registration tracks fees and eligibility constraints (min/max participants, allowed guilds).
6. Audit logs record proposal lifecycle (submitted, reviewed, approved/declined, published).

## Tasks / Subtasks

- [ ] Backend: Event proposal endpoints; validation for required fields and constraints.
- [ ] Backend: Admin approval endpoints; state machine for proposal lifecycle; audit logging.
- [ ] Backend: Registration service respecting eligibility and min/max caps; fee tracking stub.
- [ ] Frontend: Guild Master UI to create proposals; Admin UI to review/approve/decline.
- [ ] Frontend: Event info pages and registration forms.
- [ ] QA: Workflow tests for lifecycle; notifications; registration edge cases.

## Dev Notes

- Entity References: events, event_proposals, registrations, notifications.
- Fees: Tracking only in this story; payment processing details handled in 6.5 (future).
- Publishing: Ensure time zones handled correctly; consider ICS export.

## Change Log

| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| [Current Date] | 1.0 | Initial draft for Code Battle proposal workflow | Dev Team |

## Dev Agent Record

### Agent Model Used
TBD

### Debug Log References
TBD

### Completion Notes List
TBD

### File List
TBD

## QA Results
TBD