' game-session-result-class.puml
@startuml
skinparam linetype ortho
skinparam ranksep 50
skinparam nodesep 50
skinparam classAttributeIconSize 0
hide empty members

package "API Layer" {
    class GameSessionsController {
        +ProcessMatchResult(request)
    }
}

package "Application Layer" {
    class ProcessMatchResultCommand {
        +SessionId
        +Result (Win/Lose)
        +PlayerStats
    }

    class ProcessMatchResultHandler {
        +Handle()
    }
    
    class IngestXpEventCommand {
        +AuthUserId
        +Points
        +SourceType="BossFight"
    }
}

package "Domain & Infrastructure Layer" {
    interface IGameSessionRepository
    interface IMatchResultRepository
    interface IMediator
}

' Formatting
GameSessionsController -[hidden]- ProcessMatchResultCommand

' Relationships
GameSessionsController ..> ProcessMatchResultCommand : Creates
GameSessionsController ..> ProcessMatchResultHandler : Sends

ProcessMatchResultHandler ..> ProcessMatchResultCommand : Uses
ProcessMatchResultHandler --> IGameSessionRepository
ProcessMatchResultHandler --> IMatchResultRepository
ProcessMatchResultHandler --> IMediator

ProcessMatchResultHandler ..> IngestXpEventCommand : Dispatches
@enduml