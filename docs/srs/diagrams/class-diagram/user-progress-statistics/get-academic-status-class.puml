@startuml
title 3.19.1 Class Diagram - Get Academic Status
skinparam linetype ortho
skinparam ranksep 60
skinparam nodesep 60
skinparam classAttributeIconSize 0
hide empty members

package "API Layer" {
    class UsersController {
        +GetMyAcademicStatus(cancellationToken)
    }
}

package "Application Layer" {
    class GetAcademicStatusQueryHandler {
        +Handle(request, cancellationToken)
    }

    class GetAcademicStatusQuery {
        +AuthUserId: Guid
    }
}

package "Domain & Infrastructure Layer" {
    class GetAcademicStatusResponse {
        +EnrollmentId: Guid?
        +CurrentGpa: double
        +TotalSubjects: int
        +CompletedSubjects: int
        +InProgressSubjects: int
        +FailedSubjects: int
    }

    interface IStudentEnrollmentRepository {
        +FirstOrDefaultAsync(predicate, token)
    }

    interface IStudentSemesterSubjectRepository {
        +FindAsync(predicate, token)
    }

    interface ISubjectRepository {
        +GetAllAsync(token)
    }

    class StudentEnrollment {
        +Id: Guid
        +AuthUserId: Guid
        +Status: EnrollmentStatus
    }

    class StudentSemesterSubject {
        +SubjectId: Guid
        +Grade: string
        +Status: SubjectEnrollmentStatus
        +CreditsEarned: int
    }
}

' Formatting constraints
UsersController -[hidden]- GetAcademicStatusQueryHandler

' Relationships
UsersController ..> GetAcademicStatusQuery : Creates
UsersController ..> GetAcademicStatusQueryHandler : Sends (via Mediator)

GetAcademicStatusQueryHandler ..> GetAcademicStatusResponse : Returns
GetAcademicStatusQueryHandler --> IStudentEnrollmentRepository : Uses
GetAcademicStatusQueryHandler --> IStudentSemesterSubjectRepository : Uses
GetAcademicStatusQueryHandler --> ISubjectRepository : Uses

IStudentEnrollmentRepository ..> StudentEnrollment : Manages
IStudentSemesterSubjectRepository ..> StudentSemesterSubject : Manages
@enduml