' update-activity-progress-class.puml
@startuml
skinparam linetype ortho
skinparam ranksep 50
skinparam nodesep 50
skinparam classAttributeIconSize 0
hide empty members

package "API Layer" {
    class QuestsController {
        +UpdateQuestActivityProgress()
    }
}

package "Application Layer" {
    class UpdateQuestActivityProgressCommand {
        +AuthUserId
        +QuestId
        +StepId
        +ActivityId
        +Status
    }

    class UpdateQuestActivityProgressCommandHandler {
        +Handle()
    }

    class ActivityValidationService {
        +ValidateActivityCompletion()
    }
}

package "Domain & Infrastructure Layer" {
    interface IUserQuestStepProgressRepository
    interface IQuestStepRepository
    interface IUserQuestAttemptRepository
}

QuestsController ..> UpdateQuestActivityProgressCommand : Creates
QuestsController ..> UpdateQuestActivityProgressCommandHandler : Sends

UpdateQuestActivityProgressCommandHandler --> ActivityValidationService
UpdateQuestActivityProgressCommandHandler --> IUserQuestStepProgressRepository
UpdateQuestActivityProgressCommandHandler --> IQuestStepRepository
UpdateQuestActivityProgressCommandHandler --> IUserQuestAttemptRepository
@enduml