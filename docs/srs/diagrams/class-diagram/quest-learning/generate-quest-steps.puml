' generate-quest-steps-class.puml
@startuml
skinparam linetype ortho
skinparam ranksep 50
skinparam nodesep 50
skinparam classAttributeIconSize 0
hide empty members

package "API Layer" {
    class QuestsController {
        +GenerateQuestSteps()
    }
}

package "Application Layer" {
    class GenerateQuestStepsCommand {
        +QuestId
        +UserId
    }

    class GenerateQuestStepsHandler {
        +Handle()
    }
    
    interface IQuestStepGenerationService
    interface IQuestGenerationPlugin
    interface IReadingUrlService
    class AcademicContextBuilder
}

package "Domain & Infrastructure Layer" {
    class HangfireBackgroundJob
    class QuestGenerationPlugin
    class ReadingUrlService
    interface IQuestStepRepository
    
    class QuestStep {
        +Content (JSON)
    }
}

' Formatting
QuestsController -[hidden]- GenerateQuestStepsCommand
GenerateQuestStepsHandler -[hidden]- IQuestStepRepository

' Relationships
QuestsController ..> IQuestStepGenerationService : Schedules
IQuestStepGenerationService <|.. HangfireBackgroundJob

HangfireBackgroundJob ..> GenerateQuestStepsHandler : Executes

GenerateQuestStepsHandler ..> GenerateQuestStepsCommand : Uses
GenerateQuestStepsHandler --> AcademicContextBuilder
GenerateQuestStepsHandler --> IQuestGenerationPlugin
GenerateQuestStepsHandler --> IReadingUrlService
GenerateQuestStepsHandler --> IQuestStepRepository

IQuestGenerationPlugin <|.. QuestGenerationPlugin
IReadingUrlService <|.. ReadingUrlService
IQuestStepRepository ..> QuestStep : Manages
@enduml