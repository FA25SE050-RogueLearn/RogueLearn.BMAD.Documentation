@startuml
actor Admin
participant AdminManagementUI as UI
participant ":CurriculumPrograms\nController" as Controller
participant ":IMediator" as Med
participant ":CreateCurriculumProgram\nCommandHandler" as Handler
participant ":ICurriculumProgram\nRepository" as IRepo
participant ":CurriculumProgram\nRepository" as Repo
database ":Database" as DB

Admin -> UI : Enter Program Details & Click "Save"
activate UI

UI -> Controller : POST /api/admin/programs
activate Controller

Controller -> Med : Send(CreateCurriculumProgramCommand)
activate Med

Med -> Handler : Handle(command)
activate Handler

' 1. Create Entity
Handler -> Handler : Initialize CurriculumProgram
note right
    Map fields from command
    Set CreatedAt = UtcNow
end note

' 2. Persist
Handler -> IRepo : AddAsync(Entity)
activate IRepo
IRepo -> Repo : AddAsync(Entity)
activate Repo
Repo -> DB : INSERT INTO curriculum_programs...
activate DB
DB --> Repo : Success
deactivate DB
Repo --> IRepo : Created Entity
deactivate Repo
IRepo --> Handler : Created Entity
deactivate IRepo

Handler -> Handler : Map to Response DTO

Handler --> Med : CreateCurriculumProgramResponse
deactivate Handler

Med --> Controller : Response
deactivate Med

Controller --> UI : 201 Created
deactivate Controller

UI -> UI : Redirect to Program List
UI --> Admin : Show "Program Created" Success
deactivate UI
@enduml