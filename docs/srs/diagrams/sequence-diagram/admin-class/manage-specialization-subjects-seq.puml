' manage-specialization-subjects-seq.puml
@startuml
actor Admin
participant AdminManagementUI as UI
participant ":Specialization\nController" as Controller
participant "AddSubject\nHandler" as Handler
participant "ClassRepository" as ClassDB
participant "SubjectRepository" as SubDB
participant "JoinTableRepo" as JoinDB

Admin -> UI : Select Class & Add Subject
activate UI

UI -> Controller : POST /specialization-subjects
activate Controller

Controller -> Handler : Handle(command)

activate Handler
    Handler -> ClassDB : Validate Class Exists
    Handler -> SubDB : Validate Subject Exists
    
    Handler -> JoinDB : Check Duplicate
    
    alt Duplicate
        Handler --> Controller : Throw Conflict
    else New
        Handler -> JoinDB : AddAsync(Link)
        note right
            Semester Override: 3
            PlaceholderCode: "C-LANG"
        end note
        Handler --> Controller : Return Success
    end
deactivate Handler

Controller --> UI : 201 Created
deactivate Controller

UI -> UI : Refresh Specialization List
UI --> Admin : Show "Subject Added" Success
deactivate UI
@enduml