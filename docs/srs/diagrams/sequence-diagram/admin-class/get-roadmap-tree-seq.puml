' get-roadmap-tree-seq.puml
@startuml
actor User
participant QuestManagementUI as UI
participant ":Nodes\nController" as Controller
participant "GetTree\nHandler" as Handler
participant "Node\nRepository" as DB

User -> UI : View Class Roadmap
activate UI

UI -> Controller : GET /classes/{id}/nodes/tree
activate Controller

Controller -> Handler : Handle(query)

activate Handler
    Handler -> DB : FindAsync(classId)
    note right: Fetches flat list
    DB --> Handler : List<ClassNode>
    
    Handler -> Handler : Group By ParentId
    Handler -> Handler : Recursively Build Tree
    
    Handler --> Controller : List<ClassNodeTreeItemDto>
deactivate Handler

Controller --> UI : 200 OK (JSON Tree)
deactivate Controller

UI -> UI : Render Visual Graph
UI --> User : Display Roadmap Tree
deactivate UI
@enduml