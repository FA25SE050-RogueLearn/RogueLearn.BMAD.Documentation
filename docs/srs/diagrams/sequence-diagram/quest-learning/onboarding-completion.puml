@startuml
actor Student
participant ProfileManagementUI as UI
participant ":OnboardingController" as Controller
participant ":CompleteOnboarding\nHandler" as Handler
database ":Database" as DB

Student -> UI : Select Program & Class, Click "Start Journey"
activate UI

UI -> Controller : Send CompleteOnboarding request
activate Controller

Controller -> Handler : Handle(command)
activate Handler

Handler -> DB : Fetch User Profile
activate DB
alt Profile Not Found OR Already Completed
    DB --> Handler : null / exists
    Handler --> Controller : Return Validation Fail
    Controller --> UI : 400 Bad Request
    UI --> Student : Display Error Message
else Valid Profile
    DB --> Handler : UserProfile
    deactivate DB
    
    Handler -> DB : Validate Program & Class IDs
    activate DB
    DB --> Handler : Valid
    deactivate DB
    
    Handler -> DB : Update User Profile (RouteId, ClassId, Completed=true)
    activate DB
    DB --> Handler : Success
    deactivate DB
    
    Handler --> Controller : 204 No Content
    deactivate Handler

    Controller --> UI : 204 No Content
    deactivate Controller

    UI -> UI : Redirect to Dashboard
    UI --> Student : Show Main Dashboard
end
deactivate UI
@enduml